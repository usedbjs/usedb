(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{102:function(e,n,r){"use strict";r.r(n),r.d(n,"frontMatter",(function(){return c})),r.d(n,"metadata",(function(){return s})),r.d(n,"toc",(function(){return a})),r.d(n,"default",(function(){return l}));var t=r(3),o=r(7),i=(r(0),r(112)),c={id:"using-the-serverside-binding",title:"Using the ServerSide Binding",sidebar_label:"Using the ServerSide Binding",slug:"/using-the-serverside-binding"},s={unversionedId:"using-the-serverside-binding",id:"using-the-serverside-binding",isDocsHomePage:!1,title:"Using the ServerSide Binding",description:"Serverside binding lets you perform queries with any backend resources.",source:"@site/docs/using-the-serverside-binding.md",slug:"/using-the-serverside-binding",permalink:"/usedb/docs/using-the-serverside-binding",version:"current",sidebar_label:"Using the ServerSide Binding"},a=[{value:"Steps",id:"steps",children:[{value:"1. Define Models",id:"1-define-models",children:[]},{value:"2. Initialize cache",id:"2-initialize-cache",children:[]},{value:"3. Server Binding",id:"3-server-binding",children:[]},{value:"4. Create Connection object",id:"4-create-connection-object",children:[]},{value:"5. Perform Queries",id:"5-perform-queries",children:[]}]}],d={toc:a};function l(e){var n=e.components,r=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(t.a)({},d,r,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Serverside binding lets you perform queries with any backend resources."),Object(i.b)("h2",{id:"steps"},"Steps"),Object(i.b)("h3",{id:"1-define-models"},"1. Define Models"),Object(i.b)("pre",null,Object(i.b)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'import { types } from "@usedb/core";\n\nexport const Post = types.model({\n  id: types.identifierNumber,\n  title: types.string,\n});\n')),Object(i.b)("p",null,"It stores data in-memory. See ",Object(i.b)("a",Object(t.a)({parentName:"p"},{href:"https://www.notion.so/geekyants/xyz"}),"LocalStorage Binding"),"."),Object(i.b)("h3",{id:"2-initialize-cache"},"2. Initialize cache"),Object(i.b)("pre",null,Object(i.b)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'import { createModel } from "@usedb/core";\nimport { Post } from "./models/Post";\n\nconst models = [Post];\n\nconst DBModel = createModel({\n  models,\n});\n\nexport const db = DBModel.create();\n')),Object(i.b)("h3",{id:"3-server-binding"},"3. Server Binding"),Object(i.b)("pre",null,Object(i.b)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'import { Binding, QueryData } from "@usedb/core";\nconst getURL = "http://localhost:8000/usedb";\nexport class ServerBinding {\n  getAllCollections() {\n    return new Promise(async (resolve, reject) => {\n      try {\n        resolve([]);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n  async perform(query) {\n    console.log("QUERY :: ", query);\n    const res = await fetch(getURL, {\n      method: "POST",\n      headers: {\n        "Content-Type": "application/json",\n        cors: "true",\n      },\n      body: JSON.stringify(query),\n    });\n    const json = await res.json();\n    console.log("BINDING RESPONSE :: ", json);\n    return json;\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"getURL")," contains your backend URL to connect."),Object(i.b)("h3",{id:"4-create-connection-object"},"4. Create Connection object"),Object(i.b)("pre",null,Object(i.b)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'import "./App.css";\nimport { Provider, useDB } from "@usedb/react";\nimport { RuntimeBinding, Connection } from "@usedb/core";\nimport { db } from "./db";\nimport { ServerBinding } from "./ServerBinding";\nimport { Blog } from "./models/Blog";\nimport PostComponent from "./components/PostComponent";\n\nconst connection = new Connection({ bind: new ServerBinding(), db });\n\nfunction App() {\n  return (\n    <Provider connection={connection}>\n      <PostComponent />\n    </Provider>\n  );\n}\n\nexport default App;\n')),Object(i.b)("h3",{id:"5-perform-queries"},"5. Perform Queries"),Object(i.b)("p",null,"Now you can perform the CRUD operations as discussed in the ",Object(i.b)("a",Object(t.a)({parentName:"p"},{href:"/usedb/docs/using-the-runtime-binding#4-perform-queries"}),"Runtime Binding"),". For example, to create a Post object:"),Object(i.b)("pre",null,Object(i.b)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'import React from "react";\nimport { useDB } from "@usedb/react";\nimport { db } from "@usedb/core";\n\nexport default function PostComponent() {\n  const result = useDB(\n    db.Post.create({\n      data: {\n        title: "Hello world",\n        body: "body",\n      },\n    })\n  );\n  console.log(result);\n  return <div></div>;\n}\n')))}l.isMDXComponent=!0},112:function(e,n,r){"use strict";r.d(n,"a",(function(){return u})),r.d(n,"b",(function(){return m}));var t=r(0),o=r.n(t);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var d=o.a.createContext({}),l=function(e){var n=o.a.useContext(d),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},u=function(e){var n=l(e.components);return o.a.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},b=o.a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,i=e.originalType,c=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=l(r),b=t,m=u["".concat(c,".").concat(b)]||u[b]||p[b]||i;return r?o.a.createElement(m,s(s({ref:n},d),{},{components:r})):o.a.createElement(m,s({ref:n},d))}));function m(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var i=r.length,c=new Array(i);c[0]=b;var s={};for(var a in n)hasOwnProperty.call(n,a)&&(s[a]=n[a]);s.originalType=e,s.mdxType="string"==typeof e?e:t,c[1]=s;for(var d=2;d<i;d++)c[d]=r[d];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,r)}b.displayName="MDXCreateElement"}}]);